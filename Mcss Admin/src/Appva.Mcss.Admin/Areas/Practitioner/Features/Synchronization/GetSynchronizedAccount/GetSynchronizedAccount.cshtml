@using Appva.Mcss.Admin.Application.Common;
@model Appva.Mcss.Admin.Areas.Practitioner.Models.GetSynchronizedAccountModel
@{
    SetTitle("Synkronisering av {0}", Model.Account.FullName);
}

<div id="main" class="delegate-view">
    @Html.Partial("~/Areas/Practitioner/Features/Accounts/_AccountDetails.cshtml", Model.Account)
    @Html.Partial("~/Features/Shared/_SubMenuPartial.cshtml", Model.Account)
    <div id="subheader" class="cf">
        <h1>Synkronisering</h1>
    </div>
    <div id="content" class="sync">
        <div id="content-primary">
            @if (Model.SynchronizationAvailable)
            {
                <div class="h cf">
                    <h2>LDAP</h2>
                </div>
                if (Model.LdapUser != null)
                {
                    <div class="@(Model.AccountSynchronized ? "success-msg" : "error-msg")">
                        @if (Model.AccountSynchronized)
                        {
                            <h2>
                                Användaren är synkroniserad
                                <span class="show-more">Visa detaljer</span>
                            </h2>
                            <p>Synkroniserades @Model.LocalAccount.LastSynchronized.ToString()</p>
                        }
                        else
                        {
                            <h2>
                                Användaren är ej synkroniserad
                                <span class="show-more">Visa detaljer</span>
                            </h2>
                            <p>Innehåller @Model.SynchronizationErrorCount.ToString() fel</p>
                        }
                        <table>
                            <thead>
                                <tr class="head">
                                    <th scope="col"></th>
                                    <th scope="col">MCSS</th>
                                    <th scope="col">Extern Katalog</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="title">Användarnamn</td>
                                    <td>@Model.LocalAccount.UserName</td>
                                    <td>@Model.LdapUser.Username</td>
                                </tr>
                                <tr>
                                    <td class="title">Förnamn</td>
                                    <td>@Model.LocalAccount.FirstName</td>
                                    <td>@Model.LdapUser.FirstName</td>
                                </tr>
                                <tr>
                                    <td class ="title">Efternamn</td>
                                    <td>@Model.LocalAccount.LastName</td>
                                    <td>@Model.LdapUser.LastName</td>
                                </tr>
                                <tr>
                                    <td class="title">Mail</td>
                                    <td>@Model.LocalAccount.EmailAddress</td>
                                    <td>@Model.LdapUser.Mail</td>
                                </tr>
                                <tr>
                                    <td class="title">Pin</td>
                                    <td>@Model.LocalAccount.DevicePassword</td>
                                    <td>@Model.LdapUser.Pin</td>
                                </tr>
                                <tr>
                                    <td class="title">HSA</td>
                                    <td>@Model.LocalAccount.HsaId</td>
                                    <td>@Model.LdapUser.HsaId</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                            
                        

                }
                else
                {
                    <p>Ingen användare hittades. Var vänlig kontrollera att användaren finns i den externa katalogen och att personnumret är matchar i MCSS</p>
                }

            }
            else
            {
                <h3>Det finns ingen synkronisering aktiverad</h3>
                <p>Kontakta din administratör om att aktivera synkronisering av användare i MCSS</p>
            }
        </div>
    </div>
</div>