@model Appva.Mcss.Web.ViewModels.DelegationRevisionViewModel
@{ 
    SetTitle(Localizer["Alla_mottagna_delegeringar__{0}", Model.Account.FullName].ToString()); 
}
@Html.Partial("~/Areas/Practitioner/Features/Accounts/_AccountDetails.cshtml", Model.Account)
@Html.Partial("~/Features/Shared/_SubMenuPartial.cshtml", Model.Account)
<div id="subheader" class="cf">
	<h1>@Localizer["Mottagna_delegeringar"]</h1>
     @using (Html.BeginForm(new { id = Model.AccountId })) {
        <p class="filter">
            <label>@Localizer["Visa_delegering_för_datum_"]</label> 
            @Html.EditorFor(m => m.Date)
            @Html.ValidationMessageFor(m => m.Date)
            @Html.Submit(Localizer["Visa"].ToString())
        </p>
     }
</div>
<div id="content" class="delegate-view">
	<div id="content-primary">
		<div id="signed-events">
			<table>
				<thead>
					<tr class="head">
						<th scope="col">@Localizer["Datum"]</th>
						<th scope="col">@Localizer["Utfärdat_av"]</th>
					</tr>
				</thead>
				<tbody>
                    @foreach (var changeset in Model.ChangeSets) {
					    <tr>
						    <td>@Html.ActionLink(string.Format("{0:yyyy-MM-dd}", changeset.CreatedAt), "Changeset", new { id = changeset.Id, accountId = Model.AccountId })</td>
						    <td>@changeset.ModifiedBy.FullName</td>
					    </tr>
                    }
				</tbody>
			</table>
		</div>
	</div>
</div>
<script type="text/javascript">
    $(function () {
        Date.format = 'yyyy-mm-dd';
        $('.datepick').datePicker({ startDate: '@String.Format("{0:yyyy-MM-dd}", DateTime.Now.AddYears(-10))', clickInput: true });
        $('.subheader form').validate({
            'rules': {
                'Date': {
                    'date': true
                }
            },
            'messages': {
                'Date': {
                    'date': "@Localizer["Datum_måste_fyllas_i_med_åtta_siffror_och_bindestreck__t__ex__2012-12-21"]",
                }
            }
        });
    });
</script>