@model Appva.Mcss.Admin.Areas.Devices.Features.Devices.List.ListDeviceModel

@{
    SetTitle("Enheter");
}
<div id="subheader" class="cf">
    <h1>Enheter</h1>
    <p class="filter">
        <strong>Visa:</strong>
        @Html.ActionLink("Alla", "List", new { }, new { @class = (!Model.IsActive.HasValue) ? "sel div" : "div" })
        @Html.ActionLink("Aktiverade", "List", new { isActive = true }, new { @class = (Model.IsActive.GetValueOrDefault(false)) ? "sel div" : "div" })
        @Html.ActionLink("Inaktiverade", "List", new { isActive = false }, new { @class = (!Model.IsActive.GetValueOrDefault(true)) ? "sel div" : "div" })
    </p>
    <div style="float:right">
        <span>Totalt antal rader</span><br />
        <span class="bold">@Model.TotalItemCount.ToString("N")</span>
    </div>
    <div class="filter" style="float:right;margin-right:20px">
        <span>Visa från vald nod</span>
        @Html.ActionLink("Ja", "List", new { IsCurrentNode = true }, new { @class = (Model.IsCurrentNode ? "sel div" : "div") })
        @Html.ActionLink("Neh", "List", new { IsCurrentNode = false }, new { @class = (!Model.IsCurrentNode ? "sel div" : "div") })
    </div>
</div>

@if (Model.Items != null && Model.Items.Count > 0)
{
    bool sortOrder = (Model.IsAscending ? false : true);
    <div id="content" class="log cf">
        <div id="signlist">
            <table class="device-table">
                <thead>
                    <tr class="head">
                        <th scope="col">@Html.ActionLink("Beskrivning", "List", new { OrderBy = "Description", IsAscending = sortOrder, isActive = Model.IsActive }, new { @class = "sortbtn" })@SortIcon("Description", "Sorterad efter enhetsbeskrivning")</th>
                        <th scope="col">@Html.ActionLink("Hårdvara", "List", new { OrderBy = "Hardware", IsAscending = sortOrder, isActive = Model.IsActive }, new { @class = "sortbtn" })@SortIcon("Hardware", "Sorterad efter enhetsbeskrivning")</th>
                        <th scope="col">@Html.ActionLink("OS", "List", new { OrderBy = "OS", IsAscending = sortOrder, isActive = Model.IsActive }, new { @class = "sortbtn" })@SortIcon("OS", "Sorterad efter OS")</th>
                        <th scope="col">@Html.ActionLink("OS-version", "List", new { OrderBy = "OSVersion", IsAscending = sortOrder, isActive = Model.IsActive }, new { @class = "sortbtn" })@SortIcon("OSVersion", "Sorterad efter OS-version")</th>
                        <th scope="col">@Html.ActionLink("App-version", "List", new { OrderBy = "AppVersion", IsAscending = sortOrder, isActive = Model.IsActive }, new { @class = "sortbtn" })@SortIcon("AppVersion", "Sorterad efter App-version")</th>
                        <th scope="col">@Html.ActionLink("Bundle id", "List", new { OrderBy = "AppBundle", IsAscending = sortOrder, isActive = Model.IsActive }, new { @class = "sortbtn" })@SortIcon("AppBundle", "Sorterad efter bundle id")</th>
                        <th scope="col">@Html.ActionLink("Registrerad", "List", new { OrderBy = "CreatedAt", IsAscending = sortOrder, isActive = Model.IsActive }, new { @class = "sortbtn" })@SortIcon("CreatedAt", "Sorterad efter registreringsdatum")</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Items)
                    {
                    <tr @(item.IsActive ? string.Empty : "style=background-color:#ebf0f8")>
                        <td>@item.Description</td>
                        <td>@item.Hardware</td>
                        <td>@item.OS</td>
                        <td>@item.OSVersion</td>
                        <td>@item.AppVersion</td>
                        <td>@item.AppBundle</td>
                        <td>@item.CreatedAt</td>
                        <td style="text-align: center">
                            @Html.ActionLink("Ändra", "Edit", "Devices", new { Id = item.Id }, new { @class = "lb-link btn" })
                            @if (item.IsActive)
                            {
                                @Html.ActionLink("Inaktivera", "Inactivate", new { Id = item.Id, IsActive = Model.IsActive, Page = Model.PageNumber }, new { @class = "btn" })
                            }
                            else
                            {
                                @Html.ActionLink("Aktivera", "Reactivate", new { Id = item.Id, IsActive = Model.IsActive, Page = Model.PageNumber }, new { @class = "btn" })
                            }

                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        @Html.Pager(Model.PageSize, Model.PageNumber, Model.TotalItemCount).Options(x => x
        .DisplayTemplate("Pagination")
        .AddRouteValue("OrderBy", Model.OrderBy)
        .AddRouteValue("IsAscending", Model.IsAscending)
        .AddRouteValue("IsActive", Model.IsActive)
        .MaxNrOfPages(15)
        .AlwaysAddFirstPageNumber())
    </div>
}
@helper SortIcon(string param, string description)
{
    @(Model.OrderBy == param ? Html.Raw("<img class='sort-icon' src='/Assets/i/sort-icon.png' alt='" + description + "' width='9' height='10'>") : Html.Raw(""))
}