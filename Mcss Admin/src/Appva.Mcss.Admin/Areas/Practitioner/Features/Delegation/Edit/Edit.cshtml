@model Appva.Mcss.Web.ViewModels.DelegationEditViewModel
@{
    SetTitle("Edit");
}
<div class="std-panel delegdialog std-form lb-panel-small lb-validate-form" data-valclass="DelegationEdit">

    @using (Html.BeginForm(new { id = Model.Id })) {

        <h3 class="section-title">Ändra delegering</h3>
        <div class="select multisel">
		    @Html.LabelFor(m => m.Patient)
            @Html.DropDownListFor(
                m => m.Patient,
                    new SelectList(Model.PatientItems, "Value", "Text", Model.Patient),
                    "Alla",
                new { }
            )
            @Html.ValidationMessageFor(m => m.Patient)
            @foreach (var patient in Model.ConnectedPatients) {
                <span class="person">
                    @patient.FirstName @patient.LastName 
                    <a href="#" title="Ta bort">Ta bort</a>
                    <input name="Patients" type="hidden" value="@patient.Id" />
                </span>
            }
            <input type="hidden" id="TestPatients" name="TestPatients" />
	    </div>
	    <div class="dateinput">
            @Html.LabelFor(m => m.StartDate)
            @Html.EditorFor(m => m.StartDate)
            @Html.ValidationMessageFor(m => m.StartDate)
            @Html.LabelFor(m => m.EndDate)
            @Html.EditorFor(m => m.EndDate)
            @Html.ValidationMessageFor(m => m.EndDate)
		    <em class="hint">Max 1 år</em>
	    </div>
	    <div class="submit">
            @Html.AntiForgeryToken()
            @Html.Submit("Spara")
            @Html.Cancel("Avbryt")
	    </div>
    }
</div>