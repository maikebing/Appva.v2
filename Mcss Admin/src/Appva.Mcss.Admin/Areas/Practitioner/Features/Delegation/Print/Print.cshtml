@model Appva.Mcss.Admin.Areas.Practitioner.Models.PrintDelegationModel
@{
    SetTitle(Localizer["Delegeringsbeslut"].ToString());
    Layout = "~/Areas/Patient/Features/Shared/_PrintLayout.cshtml";
}
<div id="header" class="cf">
	<h1>@Localizer["Delegeringsbeslut_av_sjuksköterskan_gällande_hälso-_och_sjukvårdsuppgifter"]</h1>
	<p>@Localizer["(Sparas_i_10_år)"]</p>
</div>

<div id="signprint">
	<table>
		<tbody>
			<tr>
				<td>@Localizer["Namn"]<h2>@Model.DelegationRecipient.FullName</h2></td>
				<td>@Localizer["Personnummer"]<h2>@Model.DelegationRecipient.PersonalIdentityNumber</h2></td>
				<td>@Localizer["Titel"]<h2>@Model.DelegationRecipient.Title</h2></td>
			</tr>
		</tbody>
	</table>
	<h2>@Localizer["Delegerade_hälso-_och_sjukvårdsuppgifter_"]</h2>
    <table>
		<thead>
			<tr>
				<th colspan="3">@Localizer["Delegerade_hälso-_och_sjukvårdsuppgifter_"]</th>
			</tr>
			<tr class="head">
				<th scope="col">@Localizer["Delegering"]</th>
				<th scope="col" class="pats">@Localizer["Gäller_för"]</th>
				<th scope="col">@Localizer["Gäller_(max_1_år)"]</th>
			</tr>
		</thead>
		<tbody>
            @foreach (var delegation in Model.Delegations)
            {
                <tr>
                    <td>@delegation.Name</td>
                    <td class="pats">
                        @if (delegation.Patients.Count > 0)
                        {
                            <ul>
                                @foreach (var patient in delegation.Patients)
                                {
                                    <li>@patient.Value</li>
                                }
                            </ul>
                        }
                        else
                        {
                            <p>
                                @Localizer["Alla_boende_på_"]<br />
                                <b>@delegation.Address</b>
                            </p>
                        }
                    </td>
                    <td>@String.Format("{0:yyyy-MM-dd}", delegation.StartDate) till @String.Format("{0:yyyy-MM-dd}", delegation.EndDate)</td>
                </tr>
            }
		</tbody>
	</table>
    @if (Model.KnowledgeTests.Count > 0) {
	    <div class="intro">
		    <p>Undertecknad delegerar, i enlighet med Patientsäkerhetslagen och författningsbestämmelserna i SOSFS 1997:14 - Socialstyrelsens föreskrifter och allmänna råd; Delegering av arbetsuppgifter inom hälso- och sjukvård och tandvård. Den som mottager delegationen har läst och förstått MAS-riktlinjen, delegering av hälso- och sjukvårdsuppgifter. Har genomgått följande kunskapstester:</p>
		    <table>
			    <thead>
				    <tr>
					    <th scope="col">@Localizer["Test"]</th>
					    <th scope="col">@Localizer["Genomfördes"]</th>
				    </tr>
			    </thead>
			    <tbody>
                    @foreach (var test in Model.KnowledgeTests) {
				    <tr>
					    <td>@test.Name</td>
					    <td>@String.Format("{0:yyyy-MM-dd}", test.CompletedDate)</td>
				    </tr>
                    }
			    </tbody>
		    </table>
	    </div>
    }
	<div class="signature cf">
		<div class="col">
			<strong>@Localizer["Namnunderskrift_delegerande_sjuksköterska"]</strong>
			<p>@Localizer["Datum"]</p>
			<p>@Localizer["Underskrift"]</p>
			<p id="nameTitle">@Model.DelegationIssuer.FullName</p>
		</div>
		<div class="col">
			<strong>@Localizer["Namnunderskrift_av_den_som_tar_emot_delegeringen"]</strong>
			<p>@Localizer["Datum"]</p>
			<p>@Localizer["Underskrift"]</p>
		</div>
		<p><br/><br/><strong>@Model.SendToText</strong></p>
	</div>
</div>